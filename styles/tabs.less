// Displays selectable tabs above the editor.
// Overrides: atom/tabs

@tab-height: 40px;
@icon-size: 16px;

.tab-bar {
  margin: 0;
  padding: 0;
  background-color: transparent;

  .tab {
    margin: 0;
    height: @tab-height;
    line-height: @tab-height;
    color: fadeout(@light-tone, 70%);
    font-size: 1rem;
    transition: color 0.3s, background-color 0.3s;

    &:hover {
      color: fadeout(@light-tone, 30%);
      background-color: fadeout(@dark-tone-alt, 30%);
    }

    &.active {
      color: @light-tone;
      background-color: @dark-tone-alt;
    }

    // ------------------------------------------------ "close" icon (the cross)

    .close-icon {
      top: 12px;
      right: 6px;
      width: @icon-size;
      height: @icon-size;
      color: @light-tone;
      opacity: 0;
      transition: opacity 0.3s;
      border-radius: 3px;

      &::before {
        display: block;
        width: @icon-size;
        height: @icon-size;
        line-height: @icon-size;
        text-align: center;
      }
    }

    &:hover .close-icon {
      opacity: 1;

      &:hover {
        background-color: @accent;
      }
    }

    // -------------------------------------------- "modified" icon (the circle)

    &.modified:not(:hover) .close-icon {
      top: 15px;
      opacity: 1;
      border-color: @accent;
      background-color: @accent;
    }

    &.modified:hover .close-icon {
      color: @light-tone;
    }

    // -------------------------------------------------------- "dragging a tab"

    &.is-dragging {
      background: darken(@tab-background-color, 10%);
      border-color: transparent;
      opacity: .5;

      & .close-icon {
        visibility: hidden;
      }
    }
  }
}

// --------------------------------------------------------- main editor tab bar

atom-workspace-axis.vertical > atom-pane-container.panes .tab-bar {
  z-index: 2;
  transition: opacity 0.3s;

  .tab {
    opacity: 0.5;
  }

  &:hover .tab {
    opacity: 1;
  }

  .tab.active {
    opacity: 1;
  }
}

// ----------------------------------------------------------- left pane tab bar

.atom-dock-inner.left .tab-bar {
  margin: 12px;
  color: @dark-tone-alt-lighten;
  border: 1px solid @dark-tone-alt-lighten;

  .tab {
    &:hover {
      color: fadeout(@light-tone, 30%);
      background-color: @dark-tone-alt;
    }

    &.active {
      color: @light-tone;
      background-color: @dark-tone-alt-lighten;
    }
  }
}
